# Limitations of the MySQL Query Optimizer

MySQL's "everything is nested-loop join" approach to query execution isn't ideal for optimizing every kind of query. Fortunately, there are only a limited number of cases where the MySQL query optimizer does a poor job, and it's usually possible to rewrite such queries more efficiently.

## Correlated Subqueries

MySQL sometimes optimizes subqueries very badly. The worst offenders are IN() sub-queries in the WHERE clause in the WHERE clause.

```sql
SELECT * FROM tbl
WHERE id IN (SELECT id FROM tbl_id WHERE cond = 1 );
```

It's tempting to think that MySQL will execute this query from the inside out, by finding a list of id values and substituting them into the IN() list. We said an IN() list is generally very fast.
