# Ways to Restructure Queries

## Complex Queries Versus Many Queries 

One important query design question is whether is't preferable to breakup a complex query into several simpler queries. The traditional approach to database design emphasizes doing as much work as possible with as few queries as possible. This approach was historically better because of the cost of network communication and the overhead of the query parsing and optimization stages.

However, this advice doesn't applying as much to MySQL, because it was designed to handle connecting and disconnecting very efficiently and to respond to small and simple queries very quickly. All else being equal, it's still a good idea to use as few queries as possible, but sometimes you can make a query more efficient by decomposing it and executing a few simple queries instead of one complex one. Don't be afraid to do this.

### Chopping Up a Query

Another way to slice up a query is to divide and conquer, keeping it essentially the same but running it in smaller "chunks" that affect fewer rows each time.

Purging old data is a grate example. Periodic purge jobs might need to remove quite a bit of data, and doing this in one massive query could lock a lot of rows for a long time, fill up transaction logs, hog resources, and block small quires that shouldn't be interrupted. Chopping up the DELETE statement and using medium-size the queries can improve performance considerably, and reduce replication lag when a query is replicated. 

```sql
DELETE FROM tbl WHERE create_at < DATE_SUB(NOW(), INTERNAL 3 MONTH);
```